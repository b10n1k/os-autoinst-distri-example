---
name: isotovideo - github action example
# yamllint disable-line rule:truthy
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-20.04
    container:
      image: "registry.opensuse.org/devel/openqa/containers/isotovideo:qemu-x86-jq"
    steps:
      - uses: actions/checkout@v2

      - name: Run isotovideo against test code
        run: isotovideo qemu_no_kvm=1 casedir=$(pwd)

      - name: fail if any test module failed
        run: jq .result testresults/result-*.json | grep ok || (echo "Test modules failed" && exit 1)
